{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n  if (typeof newImageOrSrc === 'string') {\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    return cachedImgObj && cachedImgObj.image;\n  } else {\n    return newImageOrSrc;\n  }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n  if (!newImageOrSrc) {\n    return image;\n  } else if (typeof newImageOrSrc === 'string') {\n    if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n      return image;\n    }\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    var pendingWrap = {\n      hostEl: hostEl,\n      cb: onload,\n      cbPayload: cbPayload\n    };\n    if (cachedImgObj) {\n      image = cachedImgObj.image;\n      !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n    } else {\n      var image_1 = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n      image_1.__zrImageSrc = newImageOrSrc;\n      globalImageCache.put(newImageOrSrc, image_1.__cachedImgObj = {\n        image: image_1,\n        pending: [pendingWrap]\n      });\n    }\n    return image;\n  } else {\n    return newImageOrSrc;\n  }\n}\nfunction imageOnLoad() {\n  var cachedImgObj = this.__cachedImgObj;\n  this.onload = this.onerror = this.__cachedImgObj = null;\n  for (var i = 0; i < cachedImgObj.pending.length; i++) {\n    var pendingWrap = cachedImgObj.pending[i];\n    var cb = pendingWrap.cb;\n    cb && cb(this, pendingWrap.cbPayload);\n    pendingWrap.hostEl.dirty();\n  }\n  cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n  return image && image.width && image.height;\n}","map":{"version":3,"names":["LRU","platformApi","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","get","image","createOrUpdateImage","hostEl","onload","cbPayload","__zrImageSrc","pendingWrap","cb","isImageReady","pending","push","image_1","loadImage","imageOnLoad","put","__cachedImgObj","onerror","i","length","dirty","width","height"],"sources":["F:/codes/SpringBoot/demo/node_modules/zrender/lib/graphic/helper/image.js"],"sourcesContent":["import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            var image_1 = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image_1.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image_1.__cachedImgObj = {\n                image: image_1,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n"],"mappings":";AAAA,OAAOA,GAAG,MAAM,mBAAmB;AACnC,SAASC,WAAW,QAAQ,wBAAwB;AACpD,IAAIC,gBAAgB,GAAG,IAAIF,GAAG,CAAC,EAAE,CAAC;AAClC,OAAO,SAASG,cAAcA,CAACC,aAAa,EAAE;EAC1C,IAAI,OAAOA,aAAa,KAAK,QAAQ,EAAE;IACnC,IAAIC,YAAY,GAAGH,gBAAgB,CAACI,GAAG,CAACF,aAAa,CAAC;IACtD,OAAOC,YAAY,IAAIA,YAAY,CAACE,KAAK;EAC7C,CAAC,MACI;IACD,OAAOH,aAAa;EACxB;AACJ;AACA,OAAO,SAASI,mBAAmBA,CAACJ,aAAa,EAAEG,KAAK,EAAEE,MAAM,EAAEC,MAAM,EAAEC,SAAS,EAAE;EACjF,IAAI,CAACP,aAAa,EAAE;IAChB,OAAOG,KAAK;EAChB,CAAC,MACI,IAAI,OAAOH,aAAa,KAAK,QAAQ,EAAE;IACxC,IAAKG,KAAK,IAAIA,KAAK,CAACK,YAAY,KAAKR,aAAa,IAAK,CAACK,MAAM,EAAE;MAC5D,OAAOF,KAAK;IAChB;IACA,IAAIF,YAAY,GAAGH,gBAAgB,CAACI,GAAG,CAACF,aAAa,CAAC;IACtD,IAAIS,WAAW,GAAG;MAAEJ,MAAM,EAAEA,MAAM;MAAEK,EAAE,EAAEJ,MAAM;MAAEC,SAAS,EAAEA;IAAU,CAAC;IACtE,IAAIN,YAAY,EAAE;MACdE,KAAK,GAAGF,YAAY,CAACE,KAAK;MAC1B,CAACQ,YAAY,CAACR,KAAK,CAAC,IAAIF,YAAY,CAACW,OAAO,CAACC,IAAI,CAACJ,WAAW,CAAC;IAClE,CAAC,MACI;MACD,IAAIK,OAAO,GAAGjB,WAAW,CAACkB,SAAS,CAACf,aAAa,EAAEgB,WAAW,EAAEA,WAAW,CAAC;MAC5EF,OAAO,CAACN,YAAY,GAAGR,aAAa;MACpCF,gBAAgB,CAACmB,GAAG,CAACjB,aAAa,EAAEc,OAAO,CAACI,cAAc,GAAG;QACzDf,KAAK,EAAEW,OAAO;QACdF,OAAO,EAAE,CAACH,WAAW;MACzB,CAAC,CAAC;IACN;IACA,OAAON,KAAK;EAChB,CAAC,MACI;IACD,OAAOH,aAAa;EACxB;AACJ;AACA,SAASgB,WAAWA,CAAA,EAAG;EACnB,IAAIf,YAAY,GAAG,IAAI,CAACiB,cAAc;EACtC,IAAI,CAACZ,MAAM,GAAG,IAAI,CAACa,OAAO,GAAG,IAAI,CAACD,cAAc,GAAG,IAAI;EACvD,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGnB,YAAY,CAACW,OAAO,CAACS,MAAM,EAAED,CAAC,EAAE,EAAE;IAClD,IAAIX,WAAW,GAAGR,YAAY,CAACW,OAAO,CAACQ,CAAC,CAAC;IACzC,IAAIV,EAAE,GAAGD,WAAW,CAACC,EAAE;IACvBA,EAAE,IAAIA,EAAE,CAAC,IAAI,EAAED,WAAW,CAACF,SAAS,CAAC;IACrCE,WAAW,CAACJ,MAAM,CAACiB,KAAK,EAAE;EAC9B;EACArB,YAAY,CAACW,OAAO,CAACS,MAAM,GAAG,CAAC;AACnC;AACA,OAAO,SAASV,YAAYA,CAACR,KAAK,EAAE;EAChC,OAAOA,KAAK,IAAIA,KAAK,CAACoB,KAAK,IAAIpB,KAAK,CAACqB,MAAM;AAC/C"},"metadata":{},"sourceType":"module","externalDependencies":[]}